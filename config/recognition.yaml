---
recognition:
  # Composite architecture: use fast detector + specialized recognizer
  # For best performance (15-20 FPS target):
  #   detection_model: scrfd_2.5g (fast, accurate face detection)
  #   recognition_model: arcface (optimized embedding extraction)
  # For all-in-one solution (lower FPS but simpler):
  #   active_model: insightface (does both detection and recognition)

  # Use composite architecture (two models)
  use_composite: true
  detection_model: "scrfd_2.5g"     # Reliable face detector (WORKING)
  recognition_model: "arcface"       # Recognition-only model for embeddings

  # Legacy single model mode (kept for compatibility)
  active_model: "insightface"  # Used only when use_composite=false

  models:
    insightface:
      enabled: true
      det_size: [640, 640]
      ctx_id: -1
    scrfd_2.5g:
      enabled: true
      model_path: "models/scrfd_2.5g.onnx"
      det_size: [640, 640]  # Standard resolution for SCRFD_2.5G_KPS
      confidence_threshold: 0.3  # Lower threshold for better detection (was 0.5)
      device: "cpu"
      # ONNX Runtime optimizations for better performance
      num_threads: 8  # Tuned for best performance
      graph_optimization: true  # Enable all graph optimizations
    scrfd_10g:
      enabled: true
      model_path: "models/scrfd_2.5g.onnx"
      det_size: [320, 320]  # Optimized for 13+ FPS on this system
      confidence_threshold: 0.4
      device: "cpu"
      # ONNX Runtime optimizations for better performance
      num_threads: 8  # Tuned for best performance
      graph_optimization: true  # Enable all graph optimizations
    arcface:
      enabled: true
      model_path: "models/w600k_r50.onnx"
      device: "cpu"
      # ONNX Runtime optimizations for best performance
      num_threads: 4  # Optimal for embedding extraction
      graph_optimization: true  # Enable all graph optimizations

# Database encryption (optional)
# For demonstration of biometric data protection best practices
database:
  encryption:
    # Enable encryption for identity database (biometric embeddings)
    # Set to true to require encrypted storage
    enabled: false  # Default: false for development

    # Environment variable name for passphrase
    # SECURITY: Never store passphrase in config file!
    # Set passphrase via: export FACE_DB_PASSPHRASE="your_secure_passphrase"
    passphrase_env_var: "FACE_DB_PASSPHRASE"

    # Encryption algorithm: AES-256-GCM with PBKDF2 key derivation
    # - Key size: 256 bits
    # - PBKDF2 iterations: 100,000 (OWASP 2023 recommendation)
    # - Salt size: 128 bits (random per encryption)
    # - Nonce size: 96 bits (random per encryption)

    # Note: This is demonstration-level security for educational purposes.
    # Production deployments should use:
    # - Hardware Security Modules (HSM)
    # - Secure key management systems (AWS KMS, Azure Key Vault, etc.)
    # - Regular key rotation policies
    # - Audit logging for all encryption operations
